{"ast":null,"code":"import axios from\"axios\";import React,{useEffect,useState}from\"react\";// Import React hooks\nimport{QrReader}from\"react-qr-reader\";import{useNavigate}from\"react-router-dom\";import{BrowserBarcodeReader}from\"@zxing/library\";import\"./Dashboard.css\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function Dashboard(){const[username,setUsername]=useState(\"\");const[userId,setUserId]=useState(\"\");const[userTier,setUserTier]=useState(\"\");// State to store user's tier\nconst navigate=useNavigate();const[scanResult,setScanResult]=useState(\"\");const[selectedFile,setSelectedFile]=useState(null);const handleFileChange=event=>{setSelectedFile(event.target.files[0]);};const handleExtractBarcode=async()=>{if(selectedFile){try{const reader=new BrowserBarcodeReader();const result=await reader.decodeFromImageUrl(URL.createObjectURL(selectedFile));setScanResult(result.text);alert(\"Barcode extracted successfully!\");}catch(error){console.error(error);alert(\"Error occurred while extracting barcode. Please ensure the selected file contains a valid barcode.\");}}else{alert(\"Please select a file first.\");}};useEffect(()=>{// Function to authenticate token on component mount\nconst authenticateToken=async()=>{try{const response=await fetch(\"http://localhost:3000/auth-check\",// \"https://thelockerroom.world:3000/auth-check\",\n{method:\"GET\",headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});if(response.status===401){// Unauthorized, clear token and redirect to login page\nlocalStorage.removeItem(\"token\");navigate(\"/\");}}catch(error){console.error(\"Error authenticating token:\",error);}};authenticateToken();// Call the authentication function on component mount\n},[navigate]);useEffect(()=>{const getUsernameAndTierFromToken=async()=>{const token=localStorage.getItem(\"token\");if(token){try{const decodedToken=JSON.parse(atob(token.split(\".\")[1]));setUsername(decodedToken.username);setUserId(decodedToken.userId);const response=await axios.get(\"http://localhost:3000/getUser/\".concat(decodedToken.userId));setUserTier(response.data.tier);// Assuming your backend sends back user's tier\n}catch(error){console.error(\"Error fetching user information:\",error);}}};getUsernameAndTierFromToken();},[]);useEffect(()=>{// Function to retrieve the user information from the backend\nconst getUserInfo=async()=>{try{// Make a GET request to fetch user information based on user ID\nconst response=await axios.get(\"http://localhost:3000/getUser/\".concat(userId));// const response = await axios.get(\n//   `https://thelockerroom.world:3000/getUser/${userId}`\n// );\n}catch(error){console.error(\"Error fetching user information:\",error);}};getUserInfo();// Call the function to fetch user information\n},[userId]);const goToOLUniformsInventory=()=>{navigate(\"/ol-uniforms-inventory\");};const goToOrientaitonResourcesInventory=()=>{navigate(\"/orientation-resources-inventory\");};const goToPlannerInventory=()=>{navigate(\"/planner-inventory\");};const goToCreateUser=()=>{navigate(\"/create-user\");};const goToOther=()=>{navigate(\"/other\");};const goToHistory=()=>{navigate(\"/history\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome Back, \",username,\"! We missed you.\"]}),/*#__PURE__*/_jsx(\"h1\",{children:\"NSFP Orientation 2024\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Logistics Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:goToOLUniformsInventory,children:\"OL Uniforms\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:goToOrientaitonResourcesInventory,children:\"Orientation Supplies\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:goToPlannerInventory,children:\"Session Planner\"}),userTier===\"2\"&&/*#__PURE__*/ // Show the \"Create User\" button only if user's tier is 1}\n_jsx(\"button\",{className:\"button\",onClick:goToCreateUser,children:\"Create User\"}),userTier===\"2\"&&/*#__PURE__*/ // Show the \"History\" button only if user's tier is 2\n_jsx(\"button\",{className:\"button\",onClick:goToHistory,children:\"History\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:goToOther,children:\"Other\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"barcode-scanner\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleExtractBarcode,children:\"Extract Barcode\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:scanResult,readOnly:true,placeholder:\"Extracted Barcode\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>setScanResult(\"\"),children:\"Clear\"})]})]});}export default Dashboard;","map":{"version":3,"names":["axios","React","useEffect","useState","QrReader","useNavigate","BrowserBarcodeReader","jsxs","_jsxs","jsx","_jsx","Dashboard","username","setUsername","userId","setUserId","userTier","setUserTier","navigate","scanResult","setScanResult","selectedFile","setSelectedFile","handleFileChange","event","target","files","handleExtractBarcode","reader","result","decodeFromImageUrl","URL","createObjectURL","text","alert","error","console","authenticateToken","response","fetch","method","headers","Authorization","concat","localStorage","getItem","status","removeItem","getUsernameAndTierFromToken","token","decodedToken","JSON","parse","atob","split","get","data","tier","getUserInfo","goToOLUniformsInventory","goToOrientaitonResourcesInventory","goToPlannerInventory","goToCreateUser","goToOther","goToHistory","className","children","onClick","type","accept","onChange","value","readOnly","placeholder"],"sources":["/Users/leonardomm/Desktop/SFSU/TL/SFSU_Orientation_2024_Logistics/App/src/Dashboard.js"],"sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\"; // Import React hooks\nimport { QrReader } from \"react-qr-reader\";\nimport { useNavigate } from \"react-router-dom\";\nimport { BrowserBarcodeReader } from \"@zxing/library\";\n\nimport \"./Dashboard.css\";\n\nfunction Dashboard() {\n  const [username, setUsername] = useState(\"\");\n  const [userId, setUserId] = useState(\"\");\n  const [userTier, setUserTier] = useState(\"\"); // State to store user's tier\n  const navigate = useNavigate();\n  const [scanResult, setScanResult] = useState(\"\");\n  const [selectedFile, setSelectedFile] = useState(null);\n\n  const handleFileChange = (event) => {\n    setSelectedFile(event.target.files[0]);\n  };\n\n  const handleExtractBarcode = async () => {\n    if (selectedFile) {\n      try {\n        const reader = new BrowserBarcodeReader();\n        const result = await reader.decodeFromImageUrl(\n          URL.createObjectURL(selectedFile)\n        );\n        setScanResult(result.text);\n        alert(\"Barcode extracted successfully!\");\n      } catch (error) {\n        console.error(error);\n        alert(\n          \"Error occurred while extracting barcode. Please ensure the selected file contains a valid barcode.\"\n        );\n      }\n    } else {\n      alert(\"Please select a file first.\");\n    }\n  };\n\n  useEffect(() => {\n    // Function to authenticate token on component mount\n    const authenticateToken = async () => {\n      try {\n        const response = await fetch(\n          \"http://localhost:3000/auth-check\",\n          // \"https://thelockerroom.world:3000/auth-check\",\n          {\n            method: \"GET\",\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n            },\n          }\n        );\n        if (response.status === 401) {\n          // Unauthorized, clear token and redirect to login page\n          localStorage.removeItem(\"token\");\n          navigate(\"/\");\n        }\n      } catch (error) {\n        console.error(\"Error authenticating token:\", error);\n      }\n    };\n\n    authenticateToken(); // Call the authentication function on component mount\n  }, [navigate]);\n\n  useEffect(() => {\n    const getUsernameAndTierFromToken = async () => {\n      const token = localStorage.getItem(\"token\");\n      if (token) {\n        try {\n          const decodedToken = JSON.parse(atob(token.split(\".\")[1]));\n          setUsername(decodedToken.username);\n          setUserId(decodedToken.userId);\n          const response = await axios.get(\n            `http://localhost:3000/getUser/${decodedToken.userId}`\n          );\n          setUserTier(response.data.tier); // Assuming your backend sends back user's tier\n        } catch (error) {\n          console.error(\"Error fetching user information:\", error);\n        }\n      }\n    };\n\n    getUsernameAndTierFromToken();\n  }, []);\n\n  useEffect(() => {\n    // Function to retrieve the user information from the backend\n    const getUserInfo = async () => {\n      try {\n        // Make a GET request to fetch user information based on user ID\n\n        const response = await axios.get(\n          `http://localhost:3000/getUser/${userId}`\n        );\n        // const response = await axios.get(\n        //   `https://thelockerroom.world:3000/getUser/${userId}`\n        // );\n      } catch (error) {\n        console.error(\"Error fetching user information:\", error);\n      }\n    };\n\n    getUserInfo(); // Call the function to fetch user information\n  }, [userId]);\n\n  const goToOLUniformsInventory = () => {\n    navigate(\"/ol-uniforms-inventory\");\n  };\n\n  const goToOrientaitonResourcesInventory = () => {\n    navigate(\"/orientation-resources-inventory\");\n  };\n\n  const goToPlannerInventory = () => {\n    navigate(\"/planner-inventory\");\n  };\n\n  const goToCreateUser = () => {\n    navigate(\"/create-user\");\n  };\n\n  const goToOther = () => {\n    navigate(\"/other\");\n  };\n  const goToHistory = () => {\n    navigate(\"/history\");\n  };\n\n  return (\n    <div className=\"dashboard\">\n      <h1>Welcome Back, {username}! We missed you.</h1>\n      <h1>NSFP Orientation 2024</h1>\n      <h1>Logistics Dashboard</h1>\n      <div className=\"button-container\">\n        <button className=\"button\" onClick={goToOLUniformsInventory}>\n          OL Uniforms\n        </button>\n        <button className=\"button\" onClick={goToOrientaitonResourcesInventory}>\n          Orientation Supplies\n        </button>\n        <button className=\"button\" onClick={goToPlannerInventory}>\n          Session Planner\n        </button>\n        {userTier === \"2\" && ( // Show the \"Create User\" button only if user's tier is 1}\n          <button className=\"button\" onClick={goToCreateUser}>\n            Create User\n          </button>\n        )}\n        {userTier === \"2\" && ( // Show the \"History\" button only if user's tier is 2\n          <button className=\"button\" onClick={goToHistory}>\n            History\n          </button>\n        )}\n        <button className=\"button\" onClick={goToOther}>\n          Other\n        </button>\n      </div>\n      <div className=\"barcode-scanner\">\n        <input type=\"file\" accept=\"image/*\" onChange={handleFileChange} />\n        <button className=\"button\" onClick={handleExtractBarcode}>\n          Extract Barcode\n        </button>\n        <input\n          type=\"text\"\n          value={scanResult}\n          readOnly\n          placeholder=\"Extracted Barcode\"\n        />\n        <button className=\"button\" onClick={() => setScanResult(\"\")}>\n          Clear\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAAE;AACpD,OAASC,QAAQ,KAAQ,iBAAiB,CAC1C,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,oBAAoB,KAAQ,gBAAgB,CAErD,MAAO,iBAAiB,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAEzB,QAAS,CAAAC,SAASA,CAAA,CAAG,CACnB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACW,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACa,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAAE;AAC9C,KAAM,CAAAe,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACc,UAAU,CAAEC,aAAa,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACkB,YAAY,CAAEC,eAAe,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAEtD,KAAM,CAAAoB,gBAAgB,CAAIC,KAAK,EAAK,CAClCF,eAAe,CAACE,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CACxC,CAAC,CAED,KAAM,CAAAC,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC,GAAIN,YAAY,CAAE,CAChB,GAAI,CACF,KAAM,CAAAO,MAAM,CAAG,GAAI,CAAAtB,oBAAoB,CAAC,CAAC,CACzC,KAAM,CAAAuB,MAAM,CAAG,KAAM,CAAAD,MAAM,CAACE,kBAAkB,CAC5CC,GAAG,CAACC,eAAe,CAACX,YAAY,CAClC,CAAC,CACDD,aAAa,CAACS,MAAM,CAACI,IAAI,CAAC,CAC1BC,KAAK,CAAC,iCAAiC,CAAC,CAC1C,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACpBD,KAAK,CACH,oGACF,CAAC,CACH,CACF,CAAC,IAAM,CACLA,KAAK,CAAC,6BAA6B,CAAC,CACtC,CACF,CAAC,CAEDhC,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAmC,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAC1B,kCAAkC,CAClC;AACA,CACEC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACPC,aAAa,WAAAC,MAAA,CAAYC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACxD,CACF,CACF,CAAC,CACD,GAAIP,QAAQ,CAACQ,MAAM,GAAK,GAAG,CAAE,CAC3B;AACAF,YAAY,CAACG,UAAU,CAAC,OAAO,CAAC,CAChC7B,QAAQ,CAAC,GAAG,CAAC,CACf,CACF,CAAE,MAAOiB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACrD,CACF,CAAC,CAEDE,iBAAiB,CAAC,CAAC,CAAE;AACvB,CAAC,CAAE,CAACnB,QAAQ,CAAC,CAAC,CAEdhB,SAAS,CAAC,IAAM,CACd,KAAM,CAAA8C,2BAA2B,CAAG,KAAAA,CAAA,GAAY,CAC9C,KAAM,CAAAC,KAAK,CAAGL,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAII,KAAK,CAAE,CACT,GAAI,CACF,KAAM,CAAAC,YAAY,CAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACJ,KAAK,CAACK,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAC1DzC,WAAW,CAACqC,YAAY,CAACtC,QAAQ,CAAC,CAClCG,SAAS,CAACmC,YAAY,CAACpC,MAAM,CAAC,CAC9B,KAAM,CAAAwB,QAAQ,CAAG,KAAM,CAAAtC,KAAK,CAACuD,GAAG,kCAAAZ,MAAA,CACGO,YAAY,CAACpC,MAAM,CACtD,CAAC,CACDG,WAAW,CAACqB,QAAQ,CAACkB,IAAI,CAACC,IAAI,CAAC,CAAE;AACnC,CAAE,MAAOtB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,CAAEA,KAAK,CAAC,CAC1D,CACF,CACF,CAAC,CAEDa,2BAA2B,CAAC,CAAC,CAC/B,CAAC,CAAE,EAAE,CAAC,CAEN9C,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAwD,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF;AAEA,KAAM,CAAApB,QAAQ,CAAG,KAAM,CAAAtC,KAAK,CAACuD,GAAG,kCAAAZ,MAAA,CACG7B,MAAM,CACzC,CAAC,CACD;AACA;AACA;AACF,CAAE,MAAOqB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,CAAEA,KAAK,CAAC,CAC1D,CACF,CAAC,CAEDuB,WAAW,CAAC,CAAC,CAAE;AACjB,CAAC,CAAE,CAAC5C,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAA6C,uBAAuB,CAAGA,CAAA,GAAM,CACpCzC,QAAQ,CAAC,wBAAwB,CAAC,CACpC,CAAC,CAED,KAAM,CAAA0C,iCAAiC,CAAGA,CAAA,GAAM,CAC9C1C,QAAQ,CAAC,kCAAkC,CAAC,CAC9C,CAAC,CAED,KAAM,CAAA2C,oBAAoB,CAAGA,CAAA,GAAM,CACjC3C,QAAQ,CAAC,oBAAoB,CAAC,CAChC,CAAC,CAED,KAAM,CAAA4C,cAAc,CAAGA,CAAA,GAAM,CAC3B5C,QAAQ,CAAC,cAAc,CAAC,CAC1B,CAAC,CAED,KAAM,CAAA6C,SAAS,CAAGA,CAAA,GAAM,CACtB7C,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,CACD,KAAM,CAAA8C,WAAW,CAAGA,CAAA,GAAM,CACxB9C,QAAQ,CAAC,UAAU,CAAC,CACtB,CAAC,CAED,mBACEV,KAAA,QAAKyD,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB1D,KAAA,OAAA0D,QAAA,EAAI,gBAAc,CAACtD,QAAQ,CAAC,kBAAgB,EAAI,CAAC,cACjDF,IAAA,OAAAwD,QAAA,CAAI,uBAAqB,CAAI,CAAC,cAC9BxD,IAAA,OAAAwD,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5B1D,KAAA,QAAKyD,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BxD,IAAA,WAAQuD,SAAS,CAAC,QAAQ,CAACE,OAAO,CAAER,uBAAwB,CAAAO,QAAA,CAAC,aAE7D,CAAQ,CAAC,cACTxD,IAAA,WAAQuD,SAAS,CAAC,QAAQ,CAACE,OAAO,CAAEP,iCAAkC,CAAAM,QAAA,CAAC,sBAEvE,CAAQ,CAAC,cACTxD,IAAA,WAAQuD,SAAS,CAAC,QAAQ,CAACE,OAAO,CAAEN,oBAAqB,CAAAK,QAAA,CAAC,iBAE1D,CAAQ,CAAC,CACRlD,QAAQ,GAAK,GAAG,gBAAM;AACrBN,IAAA,WAAQuD,SAAS,CAAC,QAAQ,CAACE,OAAO,CAAEL,cAAe,CAAAI,QAAA,CAAC,aAEpD,CAAQ,CACT,CACAlD,QAAQ,GAAK,GAAG,gBAAM;AACrBN,IAAA,WAAQuD,SAAS,CAAC,QAAQ,CAACE,OAAO,CAAEH,WAAY,CAAAE,QAAA,CAAC,SAEjD,CAAQ,CACT,cACDxD,IAAA,WAAQuD,SAAS,CAAC,QAAQ,CAACE,OAAO,CAAEJ,SAAU,CAAAG,QAAA,CAAC,OAE/C,CAAQ,CAAC,EACN,CAAC,cACN1D,KAAA,QAAKyD,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BxD,IAAA,UAAO0D,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,SAAS,CAACC,QAAQ,CAAE/C,gBAAiB,CAAE,CAAC,cAClEb,IAAA,WAAQuD,SAAS,CAAC,QAAQ,CAACE,OAAO,CAAExC,oBAAqB,CAAAuC,QAAA,CAAC,iBAE1D,CAAQ,CAAC,cACTxD,IAAA,UACE0D,IAAI,CAAC,MAAM,CACXG,KAAK,CAAEpD,UAAW,CAClBqD,QAAQ,MACRC,WAAW,CAAC,mBAAmB,CAChC,CAAC,cACF/D,IAAA,WAAQuD,SAAS,CAAC,QAAQ,CAACE,OAAO,CAAEA,CAAA,GAAM/C,aAAa,CAAC,EAAE,CAAE,CAAA8C,QAAA,CAAC,OAE7D,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAvD,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}