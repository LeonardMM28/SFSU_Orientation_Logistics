{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{FiArrowLeftCircle}from\"react-icons/fi\";import{useNavigate}from\"react-router-dom\";import{PiArrowSquareDownRightFill,PiArrowSquareUpRightFill}from\"react-icons/pi\";import axios from\"axios\";import\"./OL_Uniforms_Inventory.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function OL_Uniforms_Inventory(){const[items,setItems]=useState([]);const[modalOpen,setModalOpen]=useState(false);const[modalType,setModalType]=useState(\"\");const[currentItem,setCurrentItem]=useState(null);const[amount,setAmount]=useState(0);const navigate=useNavigate();useEffect(()=>{const fetchItems=async()=>{try{const response=await axios.get(\"http://localhost:3000/items/uniforms\",{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});setItems(response.data);}catch(error){console.error(\"Error fetching uniforms:\",error);}};fetchItems();},[]);const goToAdd=()=>{navigate(\"/add-ol-uniforms\");};const goToDashboard=()=>{navigate(\"/dashboard\");};const goToEdit=id=>{navigate(\"/edit-ol-uniforms/\".concat(id));};const handleActionClick=(item,type)=>{setCurrentItem(item);setModalType(type);setModalOpen(true);};const handleAmountChange=e=>{setAmount(e.target.value);};const handleActionConfirm=async()=>{try{const endpoint=modalType===\"store\"?\"store/item\":\"retrieve/item\";const response=await axios.post(\"http://localhost:3000/\".concat(endpoint),{itemId:currentItem.id,amount:Number(amount)},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});alert(response.data.message);setModalOpen(false);window.location.reload();// To fetch updated items\n}catch(error){console.error(\"Error \".concat(modalType,\"ing item:\"),error);alert(error.response.data.message||\"Error processing request\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"uniform-inventory\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"back-icon-container\",children:[/*#__PURE__*/_jsx(FiArrowLeftCircle,{onClick:goToDashboard,className:\"back-icon\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"OL UNIFORMS\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"search-input\",placeholder:\"Search...\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:goToAdd,children:\"ADD ITEM\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"items-container\",children:items.length>0?items.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[item.image&&/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"item-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-details\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"item-title\",children:item.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-detail\",children:[\"Location Annex: \",item.location_annex]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-detail\",children:[\"Location HQ: \",item.location_hq]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-quantities\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"button\",onClick:()=>handleActionClick(item,\"retrieve\"),children:[/*#__PURE__*/_jsx(PiArrowSquareUpRightFill,{className:\"button-icon\"}),\"RETRIEVE\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantities\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"quantity\",children:[\"HQ: \",item.quantity_hq]}),/*#__PURE__*/_jsxs(\"p\",{className:\"quantity\",children:[\"Annex: \",item.quantity_annex]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"button\",onClick:()=>handleActionClick(item,\"store\"),children:[\"STORE \",/*#__PURE__*/_jsx(PiArrowSquareDownRightFill,{className:\"button-icon\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>goToEdit(item.id),className:\"edit-button\",children:\"Edit\"})]})]},item.id)):/*#__PURE__*/_jsx(\"p\",{className:\"no-uniforms\",children:\"No uniforms available.\"})}),modalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay-uniform\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:modalType===\"store\"?\"Store Item\":\"Retrieve Item\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Amount to \",modalType===\"store\"?\"Store\":\"Retrieve\",\":\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:amount,onChange:handleAmountChange,min:\"0\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleActionConfirm,children:\"Confirm\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button close-button\",onClick:()=>setModalOpen(false),children:\"\\xD7\"})]})})]});}export default OL_Uniforms_Inventory;","map":{"version":3,"names":["React","useEffect","useState","FiArrowLeftCircle","useNavigate","PiArrowSquareDownRightFill","PiArrowSquareUpRightFill","axios","jsx","_jsx","jsxs","_jsxs","OL_Uniforms_Inventory","items","setItems","modalOpen","setModalOpen","modalType","setModalType","currentItem","setCurrentItem","amount","setAmount","navigate","fetchItems","response","get","headers","Authorization","concat","localStorage","getItem","data","error","console","goToAdd","goToDashboard","goToEdit","id","handleActionClick","item","type","handleAmountChange","e","target","value","handleActionConfirm","endpoint","post","itemId","Number","alert","message","window","location","reload","className","children","onClick","placeholder","length","map","image","src","alt","name","location_annex","location_hq","quantity_hq","quantity_annex","onChange","min"],"sources":["/Users/leonardomm/Desktop/SFSU/TL/SFSU_Orientation_2024_Logistics/App/src/OL_Uniforms_Inventory.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { FiArrowLeftCircle } from \"react-icons/fi\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  PiArrowSquareDownRightFill,\n  PiArrowSquareUpRightFill,\n} from \"react-icons/pi\";\nimport axios from \"axios\";\nimport \"./OL_Uniforms_Inventory.css\";\n\nfunction OL_Uniforms_Inventory() {\n  const [items, setItems] = useState([]);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalType, setModalType] = useState(\"\");\n  const [currentItem, setCurrentItem] = useState(null);\n  const [amount, setAmount] = useState(0);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchItems = async () => {\n      try {\n        const response = await axios.get(\n          \"http://localhost:3000/items/uniforms\",\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n            },\n          }\n        );\n        setItems(response.data);\n      } catch (error) {\n        console.error(\"Error fetching uniforms:\", error);\n      }\n    };\n\n    fetchItems();\n  }, []);\n\n  const goToAdd = () => {\n    navigate(\"/add-ol-uniforms\");\n  };\n\n  const goToDashboard = () => {\n    navigate(\"/dashboard\");\n  };\n\n  const goToEdit = (id) => {\n    navigate(`/edit-ol-uniforms/${id}`);\n  };\n\n  const handleActionClick = (item, type) => {\n    setCurrentItem(item);\n    setModalType(type);\n    setModalOpen(true);\n  };\n\n  const handleAmountChange = (e) => {\n    setAmount(e.target.value);\n  };\n\n  const handleActionConfirm = async () => {\n    try {\n      const endpoint = modalType === \"store\" ? \"store/item\" : \"retrieve/item\";\n      const response = await axios.post(\n        `http://localhost:3000/${endpoint}`,\n        { itemId: currentItem.id, amount: Number(amount) },\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          },\n        }\n      );\n      alert(response.data.message);\n      setModalOpen(false);\n      window.location.reload(); // To fetch updated items\n    } catch (error) {\n      console.error(`Error ${modalType}ing item:`, error);\n      alert(error.response.data.message || \"Error processing request\");\n    }\n  };\n\n  return (\n    <div className=\"uniform-inventory\">\n      <div className=\"back-icon-container\">\n        <FiArrowLeftCircle onClick={goToDashboard} className=\"back-icon\" />\n        <h1 className=\"title\">OL UNIFORMS</h1>\n      </div>\n      <div className=\"search-container\">\n        <input type=\"text\" className=\"search-input\" placeholder=\"Search...\" />\n        <button className=\"button\" onClick={goToAdd}>\n          ADD ITEM\n        </button>\n      </div>\n      <div className=\"items-container\">\n        {items.length > 0 ? (\n          items.map((item) => (\n            <div key={item.id} className=\"item\">\n              {item.image && (\n                <img src={item.image} alt={item.name} className=\"item-image\" />\n              )}\n              <div className=\"item-details\">\n                <h2 className=\"item-title\">{item.name}</h2>\n                <p className=\"item-detail\">\n                  Location Annex: {item.location_annex}\n                </p>\n                <p className=\"item-detail\">Location HQ: {item.location_hq}</p>\n              </div>\n              <div className=\"item-actions\">\n                <div className=\"item-quantities\">\n                  <button\n                    className=\"button\"\n                    onClick={() => handleActionClick(item, \"retrieve\")}\n                  >\n                    <PiArrowSquareUpRightFill className=\"button-icon\" />\n                    RETRIEVE\n                  </button>\n                  <div className=\"quantities\">\n                    <p className=\"quantity\">HQ: {item.quantity_hq}</p>\n                    <p className=\"quantity\">Annex: {item.quantity_annex}</p>\n                  </div>\n                  <button\n                    className=\"button\"\n                    onClick={() => handleActionClick(item, \"store\")}\n                  >\n                    STORE <PiArrowSquareDownRightFill className=\"button-icon\" />\n                  </button>\n                </div>\n                <button\n                  onClick={() => goToEdit(item.id)}\n                  className=\"edit-button\"\n                >\n                  Edit\n                </button>\n              </div>\n            </div>\n          ))\n        ) : (\n          <p className=\"no-uniforms\">No uniforms available.</p>\n        )}\n      </div>\n\n      {modalOpen && (\n        <div className=\"modal-overlay-uniform\">\n          <div className=\"modal-content\">\n            <h2>{modalType === \"store\" ? \"Store Item\" : \"Retrieve Item\"}</h2>\n            <p>Amount to {modalType === \"store\" ? \"Store\" : \"Retrieve\"}:</p>\n            <input\n              type=\"number\"\n              value={amount}\n              onChange={handleAmountChange}\n              min=\"0\"\n            />\n            <button className=\"button\" onClick={handleActionConfirm}>\n              Confirm\n            </button>\n            <button\n              className=\"button close-button\"\n              onClick={() => setModalOpen(false)}\n            >\n              &times;\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default OL_Uniforms_Inventory;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}